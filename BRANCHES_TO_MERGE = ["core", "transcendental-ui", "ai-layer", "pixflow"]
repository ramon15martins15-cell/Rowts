import subprocess

# ðŸ”§ ConfiguraÃ§Ãµes
MAIN_BRANCH = "main"
BRANCHES_TO_MERGE = ["dev", "feature-ui", "hotfix-api"]  # <- Edite esta lista com suas branches

def run_git_command(cmd):
    try:
        subprocess.run(cmd, check=True)
    except subprocess.CalledProcessError:
        print(f"âŒ Erro ao executar: {' '.join(cmd)}")
        exit(1)

# ðŸ“Œ Troca para o branch principal e puxa atualizaÃ§Ãµes
print(f"ðŸ“Œ Alternando para o branch principal: {MAIN_BRANCH}")
run_git_command(["git", "checkout", MAIN_BRANCH])

print(f"ðŸ”„ Atualizando {MAIN_BRANCH} com repositÃ³rio remoto...")
run_git_command(["git", "pull"])

# ðŸ”€ Mescla cada branch da lista
for branch in BRANCHES_TO_MERGE:
    print(f"\nðŸ”€ Mesclando {branch} em {MAIN_BRANCH}...")
    run_git_command(["git", "merge", branch])

# ðŸš€ Envia tudo para o GitHub
print(f"\nðŸš€ Enviando {MAIN_BRANCH} para o GitHub...")
run_git_command(["git", "push"])

print("\nâœ… Todas as branches foram mescladas com sucesso no branch principal!")
